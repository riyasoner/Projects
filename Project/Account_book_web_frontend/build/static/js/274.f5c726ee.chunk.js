"use strict";(self.webpackChunkaccount_book_web=self.webpackChunkaccount_book_web||[]).push([[274],{274:(e,a,s)=>{s.r(a),s.d(a,{default:()=>d});var l=s(9379),t=s(5043),n=s(965),o=s(6140),r=s(579);const d=()=>{const{get:e,patch:a}=(0,o.A)(),[s,d]=(0,t.useState)({timezone:"GMT",email_id:"",phone_no:"",name:""}),[c,i]=(0,t.useState)(""),[m,u]=(0,t.useState)(""),[h,x]=(0,t.useState)(""),[p,j]=(0,t.useState)(!1),[b,N]=(0,t.useState)(""),w=localStorage.getItem("userId");(0,t.useEffect)(()=>{if(w){(async()=>{try{const a=await e("".concat(n.A.getUserInfo,"?id=").concat(w));a.data[0]&&d({timezone:a.data[0].timezone||"GMT",email_id:a.data[0].email_id||"",phone_no:a.data[0].phone_no||"",name:a.data[0].name||""})}catch(a){console.error("Error fetching settings:",a),N("Failed to fetch user settings!")}})()}},[w,e]);return(0,r.jsxs)("div",{className:"container mt-5",children:[b&&(0,r.jsx)("div",{className:"mt-3 alert alert-info",children:b}),(0,r.jsxs)("div",{className:"card",style:{maxWidth:"1000px"},children:[(0,r.jsx)("div",{className:"card-header d-flex align-items-center",style:{backgroundColor:"#419EB9"},children:(0,r.jsxs)("span",{className:"text-white",children:[(0,r.jsx)("i",{className:"bi bi-gear"})," Settings"]})}),(0,r.jsxs)("div",{className:"card-body",children:[(0,r.jsxs)("div",{className:"mb-3 row",children:[(0,r.jsx)("label",{htmlFor:"timezone",className:"col-md-2 col-form-label text-muted",children:"Timezone"}),(0,r.jsx)("div",{className:"col-md-8",children:(0,r.jsxs)("select",{id:"timezone",className:"form-select",name:"timezone",value:s.timezone,onChange:e=>d((0,l.A)((0,l.A)({},s),{},{timezone:e.target.value})),children:[(0,r.jsx)("option",{value:"GMT",children:"GMT"}),(0,r.jsx)("option",{value:"UTC",children:"UTC"}),(0,r.jsx)("option",{value:"PST",children:"PST"}),(0,r.jsx)("option",{value:"EST",children:"EST"})]})})]}),(0,r.jsx)("hr",{}),(0,r.jsxs)("div",{className:"mb-3 row",children:[(0,r.jsx)("label",{htmlFor:"email",className:"col-md-2 col-form-label text-muted",children:"Email"}),(0,r.jsx)("div",{className:"col-md-8",children:(0,r.jsx)("input",{type:"email",className:"form-control",id:"email",name:"email",value:s.email_id,disabled:!0})})]}),(0,r.jsx)("hr",{}),(0,r.jsxs)("div",{className:"mb-3 row",children:[(0,r.jsx)("label",{htmlFor:"phone",className:"col-md-2 col-form-label text-muted",children:"Phone"}),(0,r.jsx)("div",{className:"col-md-8",children:(0,r.jsx)("input",{type:"tel",className:"form-control",id:"phone",name:"phone",value:s.phone_no,disabled:!0})})]}),(0,r.jsx)("hr",{}),(0,r.jsxs)("div",{className:"mb-3 row",children:[(0,r.jsx)("div",{className:"mb-3 p-2",style:{backgroundColor:"#E5EAEC",borderRadius:"5px"},children:(0,r.jsx)("span",{className:"text-muted",children:"UserInfo"})}),(0,r.jsx)("label",{htmlFor:"name",className:"col-md-2 col-form-label text-muted",children:"Name"}),(0,r.jsx)("div",{className:"col-md-8",children:(0,r.jsx)("input",{type:"text",className:"form-control",id:"name",name:"name",value:s.name,onChange:e=>d((0,l.A)((0,l.A)({},s),{},{name:e.target.value}))})})]}),(0,r.jsx)("div",{className:"d-flex justify-content-start mt-3",children:(0,r.jsx)("button",{type:"button",className:"btn btn-lg",style:{backgroundColor:"#419EB9",color:"white"},onClick:async()=>{j(!0);try{const e=await a(n.A.updateUserInfoAndPass,{id:w,name:s.name});e.status&&(N(e.message||"Name updated successfully!"),localStorage.setItem("name",s.name))}catch(e){console.error("Error updating name:",e),N(e.message||"Failed to update name!")}finally{j(!1)}},disabled:p,children:p?"Updating...":"Update "})}),(0,r.jsx)("hr",{}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"mb-3 p-2",style:{backgroundColor:"#E5EAEC",borderRadius:"5px"},children:(0,r.jsx)("span",{className:"text-muted",children:"Password"})}),(0,r.jsxs)("div",{className:"row mt-2",children:[(0,r.jsx)("div",{className:"col-md-12",children:(0,r.jsx)("input",{type:"password",className:"form-control mb-2",id:"currentPassword",name:"currentPassword",placeholder:"Current Password",value:c,onChange:e=>i(e.target.value)})}),(0,r.jsx)("div",{className:"col-md-12",children:(0,r.jsx)("input",{type:"password",className:"form-control mb-2",id:"newPassword",name:"newPassword",placeholder:"New Password",value:m,onChange:e=>u(e.target.value)})}),(0,r.jsx)("div",{className:"col-md-12",children:(0,r.jsx)("input",{type:"password",className:"form-control",id:"confirmPassword",name:"confirmPassword",placeholder:"Confirm New Password",value:h,onChange:e=>x(e.target.value)})})]})]}),(0,r.jsx)("div",{className:"d-flex justify-content-start mt-3",children:(0,r.jsx)("button",{type:"button",className:"btn btn-lg",style:{backgroundColor:"#419EB9",color:"white"},onClick:async()=>{j(!0);const e={id:w,current_password:c,new_password:m,confirm_new_password:h};try{const s=await a(n.A.updateUserInfoAndPass,e);s.status&&N(s.message||"Password updated successfully!")}catch(s){console.error("Error updating password:",s),N(s.message||"Failed to update password!")}finally{j(!1)}},disabled:p,children:p?"Updating...":"Update Password"})})]})]})]})}}}]);
//# sourceMappingURL=274.f5c726ee.chunk.js.map